<!DOCTYPE html>
<html>
<head>
  <title>Get Current Location</title>
</head>
<body>
  <h1>위치 정보를 가져오는 중...</h1>
  <p id="status">현재 위치를 확인 중입니다...</p>

  <script>
    const filename = "location.txt";


    function saveLocationToFile(latitude, longitude) {
      const data = `${latitude},${longitude}`;
      const blob = new Blob([data], { type: "text/plain" });

      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    function success(position) {
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;

      document.getElementById("status").textContent =
        `✅ 위도: ${latitude}, 경도: ${longitude}`;

      saveLocationToFile(latitude, longitude);
    }

    function error(err) {
      document.getElementById("status").textContent =
        `❌ 오류 발생: ${err.message}`;
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, error, {
        enableHighAccuracy: true,  // 가능한 한 정확한 위치 정보 요청
        timeout: 10000,
        maximumAge: 0
      });
    } else {
      document.getElementById("status").textContent =
        "❌ 이 브라우저는 위치 정보를 지원하지 않습니다.";
    }
  </script>
</body>
</html>